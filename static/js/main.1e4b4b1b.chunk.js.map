{"version":3,"sources":["components/TravelerInitiative/TravelerInitiative.module.css","components/TravelerTime/TravelerTime.module.css","assets/images/sunset-time.gif","assets/images/day-time.gif","assets/images/night-time.gif","store/time/time.slice.ts","util/utilities.ts","components/TravelerTime/TravelerTime.tsx","util/use-encounters.ts","assets/icons/d20.tsx","store/initiative/initiative.slice.ts","components/MonsterCard/MonsterCard.tsx","components/TravelerEncounters/TravelerEncounters.tsx","util/use-weather.ts","store/weather/weather.slice.ts","components/TravelerWeather/TravelerWeather.tsx","components/TravelerInitiative/MonsterSearch.tsx","components/TravelerInitiative/TravelerInitiative.tsx","store/players/players.slice.ts","components/TravelerPlayers/TravelerPlayers.tsx","store/jojo/jojo.slice.ts","components/TravelerNotes/TravelerNotes.tsx","App.tsx","serviceWorker.ts","store/index.ts","index.tsx","components/MonsterCard/MonsterCard.module.css"],"names":["module","exports","timeSlice","createSlice","name","initialState","hour","day","season","reducers","setHour","state","action","payload","incrementHour","setDay","incrementDay","setSeason","incrementSeason","actions","capitalize","input","substr","toUpperCase","toLowerCase","getAbilityModifier","ability","Math","floor","getRoundTime","round","seconds","minutes","TravelerTime","dispatch","useDispatch","jojo","useSelector","currentTime","time","className","styles","Paragraph","strong","style","marginBottom","Title","marginTop","DividerStyle","type","onClick","active","Audio","play","chance","Chance","weightedEncounterTypes","hostile","neutral","feature","hostileEncounters","1","text","metadata","monsters","2","3","4","5","6","7","8","9","10","11","12","neutralEncounters","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","featureEncounters","nothingEvent","TravelerD20Svg","currentTheme","useThemeSwitcher","viewBox","version","xmlns","p-id","height","width","fill","d","TravelerD20","props","Icon","component","initiativeSlice","entities","currentInitiative","currentRound","addEntity","push","editEntity","entity","find","e","id","undefined","initiative","currentHP","removeEntity","filter","setEntities","nextInitiative","entitiesAfterCurrentInitiative","length","max","apply","map","resetInitiative","SavingThrows","monster","savingThrowMap","STR","strength_save","DEX","dexterity_save","CON","constitution_save","INT","intelligence_save","WIS","wisdom_save","CHA","charisma_save","savingThrowKeys","Object","keys","save","Text","i","saveAsType","key","AbilityScore","score","modifier","formattedModifier","textAlign","React","memo","useState","loading","setLoading","setMonster","rollInitiativeCount","setRollInitiativeCount","rollInitiative","useCallback","monsterCount","Array","m","dice","dexterity","guid","hit_points","rollInitiativeCountHandler","value","useEffect","console","log","fetchMonster","promise","hasCanceled","Promise","resolve","reject","then","isCanceled","error","cancel","makeCancelable","fetch","response","json","catch","monsterCard","title","target","href","slug","rel","fontFamily","fontSize","color","subTitle","size","alignment","tags","challenge_rating","extra","onChange","Option","danger","gutter","span","monsterParagraph","armor_class","armor_desc","hit_dice","speed","walk","fly","swim","strength","constitution","intelligence","wisdom","charisma","skills","skill","damage_immunities","damage_resistances","damage_vulnerabilities","senses","split","join","languages","isArray","special_abilities","desc","legendary_actions","level","legendary_desc","damage_dice","attackRoll","attackRollWithBonus","attack_bonus","damageRoll","damage_bonus","RollResult","notification","open","message","description","rollAction","TravelerEncounters","getWeightedEncounterType","weighted","values","forceHostileEncounter","encounterRoll","natural","min","forceNeutralEncounter","forceFeatureEncounter","forceEncounter","generateNightEncounter","d20","generateEncounter","generator","useEncounters","currentEncounter","setCurrentEncounter","forceEncounterType","setForceEncounterType","generatorDie","setGeneratorDie","unsub","subscribe","storedGeneratorDie","localStorage","getItem","parsedEncounter","encounterJsx","word","test","roll","toString","mark","setEncounter","forceEncounterChangeHandler","generatorDieHandler","setItem","display","defaultValue","flex","defaultActiveKey","TabPane","tab","replace","tabKey","springWeightedWeather","clear","cloudy","rain","storm","snow","blizzard","tornado","summerWeightedWeather","fallWeightedWeather","winterWeightedWeather","weatherSlice","weatherType","temperature","windSpeed","setWeather","setWeatherType","setTemperature","setWindSpeed","TravelerWeather","weather","generateWeather","getWeightedWeather","weightedWeather","generateVariance","average","variance","random","useWeather","forceGenerate","generatedWeather","forceGenerateHandler","renderItem","label","justifyContent","ellipsis","MonsterSearch","onResult","searchResults","setSearchResults","searchTerm","setSearchTerm","searchForMonsters","debounce","search","results","selectHandler","trigger","options","onSearch","onSelect","placeholder","InitiativeEntityItem","onInitiativeEdit","onHPChange","onRemove","hitMod","setHitMod","editingInitiative","setEditingInitiative","editInitiativeValue","setEditInitiativeValue","entityDescription","armorClass","activeStyle","classNames","initiativeBoxLight","initiativeBoxDark","editInitiativeValueHandler","editInitiativeHandler","initiativeEditKeyHandler","Item","suffix","maxHP","valueStyle","Meta","avatar","onKeyDown","autoFocus","Panel","header","TravelerInitiative","players","populatedEntities","setPopulatedEntities","addPlayersToInitiative","player","nextInitiativeHandler","clearInitiativeHandler","getEntitiesSortedByInitiative","sort","a","b","newInitiative","eid","npcHealthChangeHandler","hp","entityToEdit","addMonsterToInitiative","removeHandler","list","fullPlayer","p","separator","itemLayout","dataSource","fontStyle","playerListSlice","addPlayer","removePlayer","editPlayer","PlayerItem","onEdit","healHandler","damageHandler","hitModChangeHandler","onEditHandler","onRemoveHandler","border","borderColor","TravelerPlayers","Form","useForm","editPlayerForm","editingPlayer","setEditingPlayer","setEditingPlayerHandler","pid","setFieldsValue","playerEditHandler","playerToEdit","playerRemoveHandler","playerHealthChangeHandler","addNewPlayer","visible","onOk","validateFields","resetFields","onCancel","labelCol","wrapperCol","form","rules","required","jojoSlice","activate","deactivate","TravelerNotes","notes","setNotes","noteChangeHandler","note","localNotes","editable","Header","Layout","Content","Footer","App","status","clicks","setClicks","resetState","prevState","padding","offset","backgroundImage","dayGif","sunsetGif","nightGif","Boolean","window","location","hostname","match","rootReducer","combineReducers","timeReducer","weatherReducer","playersReducer","initiativeReducer","jojoReducer","storageState","persistedState","JSON","parse","store","configureStore","reducer","preloadedState","initSubscriber","stringify","getState","themes","dark","process","light","ReactDOM","render","themeMap","defaultTheme","insertionPoint","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1e4b4b1b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"initiativeBoxLight\":\"TravelerInitiative_initiativeBoxLight__14z24\",\"initiativeBoxDark\":\"TravelerInitiative_initiativeBoxDark__3Qi91\",\"active\":\"TravelerInitiative_active__2a25K\",\"separator\":\"TravelerInitiative_separator__3ykyW\",\"blinker\":\"TravelerInitiative_blinker__1uXJF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TravelerTime\":\"TravelerTime_TravelerTime__3MK4e\",\"DividerStyle\":\"TravelerTime_DividerStyle__3n9SL\"};","module.exports = __webpack_public_path__ + \"static/media/sunset-time.ed14ebed.gif\";","module.exports = __webpack_public_path__ + \"static/media/day-time.60ad28e7.gif\";","module.exports = __webpack_public_path__ + \"static/media/night-time.021ed4e4.gif\";","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type TravelerSeason = 'spring' | 'summer' | 'fall' | 'winter';\n\nexport interface TravelerTime {\n    hour: number;\n    day: number;\n    season: TravelerSeason;\n}\n\nconst initialState: TravelerTime = {\n    hour: 7,\n    day: 1,\n    season: 'spring'\n};\n\nconst timeSlice = createSlice({\n    name: 'time',\n    initialState,\n    reducers: {\n        setHour(state, action: PayloadAction<number>) {\n            state.hour = action.payload;\n        },\n        incrementHour(state) {\n            const hour = state.hour + 1;\n\n            if (hour === 24) {\n                state.hour = 0;\n                state.day++;\n            } else {\n                state.hour++;\n            }\n        },\n        setDay(state, action: PayloadAction<number>) {\n            state.day = action.payload;\n        },\n        incrementDay(state) {\n            state.day++;\n        },\n        setSeason(state, action: PayloadAction<TravelerSeason>) {\n            state.season = action.payload;\n        },\n        incrementSeason(state) {\n            switch (state.season) {\n                case 'spring':\n                    state.season = 'summer';\n                    break;\n                case 'summer':\n                    state.season = 'fall';\n                    break;\n                case 'fall':\n                    state.season = 'winter';\n                    break;\n                case 'winter':\n                    state.season = 'spring';\n                    break;\n            }\n        }\n    }\n});\n\nexport const { setHour, incrementHour, setDay, incrementDay, setSeason, incrementSeason } = timeSlice.actions;\nexport default timeSlice.reducer;","export const formatTime = (hour: number): string => {\n    if (hour === 0) {\n        return '12:00am';\n    } else if (hour > 0 && hour < 12) {\n        return `${hour}:00am`;\n    } else if (hour === 12) {\n        return `12:00pm`;\n    } else if (hour > 12) {\n        return `${hour - 12}:00pm`;\n    } else {\n        return '';\n    }\n}\n\nexport const capitalize = (input: string): string => {\n    return input.substr(0, 1).toUpperCase() + input.substr(1).toLowerCase();\n}\n\nexport const getAbilityModifier = (ability: number): number => {\n    return Math.floor((ability - 10) / 2);\n}\n\nexport const formatName = (name: string): string => {\n    return name.replace('-', ' ').split(' ').map(capitalize).join(' ');\n};\n\nexport const makeCancelable = <T>(promise: Promise<T>): { promise: Promise<T>; cancel(): void } => {\n    let hasCanceled = false;\n\n    const wrappedPromise = new Promise<T>((resolve, reject) => {\n        promise.then(\n            value => hasCanceled\n                ? reject({ isCanceled: true })\n                : resolve(value),\n            error => hasCanceled\n                ? reject({ isCanceled: true })\n                : reject(error),\n        );\n    });\n\n    return {\n        promise: wrappedPromise,\n        cancel(): void {\n            hasCanceled = true;\n        },\n    };\n};\n\nexport const getRoundTime = (round: number): { minutes: string, seconds: string } => {\n    let seconds = round * 6;\n    let minutes = 0;\n\n    if (seconds >= 60) {\n        minutes = Math.floor(seconds / 60);\n        seconds = seconds % 60;\n    }\n\n    return {\n        minutes: `${minutes < 10 ? `0${minutes}` : minutes}`,\n        seconds: `${seconds < 10 ? `0${seconds}` : seconds}`\n    }\n};","import React from 'react';\n\nimport styles from './TravelerTime.module.css';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport { incrementHour, incrementSeason } from '../../store/time/time.slice';\nimport { Button, Divider, Space, Typography } from 'antd';\nimport { capitalize, formatTime } from '../../util/utilities';\n\nconst TravelerTime = () => {\n    const dispatch = useDispatch();\n    const jojo = useSelector((state: RootState) => state.jojo);\n    const currentTime = useSelector((state: RootState) => state.time);\n\n    const advanceTime = () => {\n        dispatch(incrementHour());\n\n        if (jojo.active) {\n            const timeSkipAudio = new Audio('./media/time-skip.mp3');\n            timeSkipAudio.play();\n        }\n    };\n\n    const advanceSeason = () => {\n        dispatch(incrementSeason());\n    }\n\n    return (\n        <div className={styles.TravelerTime}>\n            <Typography.Paragraph strong style={{marginBottom: 0}}>\n                {capitalize(currentTime.season)}\n            </Typography.Paragraph>\n\n            <Typography.Title style={{marginTop: 0}}>\n                {formatTime(currentTime.hour)}\n                <Divider className={styles.DividerStyle} type=\"vertical\" />\n                Day {currentTime.day}\n            </Typography.Title>\n\n            <Space>\n                <Button type=\"primary\" onClick={advanceTime}>Advance Time</Button>\n                <Button type=\"primary\" onClick={advanceSeason}>Advance Season</Button>\n            </Space>\n        </div>\n    )\n};\n\nexport default TravelerTime;","import * as Chance from 'chance';\nimport { useCallback } from 'react';\n\nconst chance = new Chance.Chance();\n\ninterface EncounterMetadata {\n    monsters: string[];\n}\n\nexport interface Encounter {\n    text: string;\n    metadata: EncounterMetadata\n}\n\nexport type GeneratorDie = 'd4' | 'd6' | 'd8' | 'd10' | 'd12' | 'd20';\n\ntype EncounterTable = {\n    [key: number]: Encounter;\n}\n\nconst weightedEncounterTypes = {\n    hostile: 1,\n    neutral: 4,\n    feature: 1\n};\n\nconst hostileEncounters: EncounterTable = {\n    1: {\n        text: 'A group of 1d6 bandits, lying concealed in wait to waylay travellers on the road.',\n        metadata: {\n            monsters: ['bandit']\n        }\n    },\n    2: {\n        text: 'A wagon train of 2d6 Duergar who are hostile to non-Dwarves (seeming merely irritable to their own kind), they have little interest in talking because they are carrying the body of a slain hero home. Attempts to delay or question them will be met with hostility and possibly an attack.',\n        metadata: {\n            monsters: ['duergar']\n        }\n    },\n    3: {\n        text: 'A group of 1d6 thieves who poses as traders or travelling bards to ingratiate themselves with the PCs but–given a chance–they will incapacitate and rob them, leaving them lying by the roadside bereft of possessions.',\n        metadata: {\n            monsters: ['bandit']\n        }\n    },\n    4: {\n        text: 'A group of 2d6 goblins who are starving, they are looking to scavenge from a local settlement, but are not above attacking an enemy they believe that they can defeat.',\n        metadata: {\n            monsters: ['goblin']\n        }\n    },\n    5: {\n        text: 'A pack of 1d4 Dire Wolves have been rampaging through the local area, menacing villages and causing a hazard to travel. How the animals got so big and why it is taking out it\\'s aggression on the locals is up to the GM.',\n        metadata: {\n            monsters: ['dire-wolf']\n        }\n    },\n    6: {\n        text: 'A hostile group of 2d6 Elves who claim guardianship of a nearby natural feature, they take a dim view of outsiders, viewing them as despoilers and corruptors of nature.',\n        metadata: {\n            monsters: ['scout']\n        }\n    },\n    7: {\n        text: 'A group of 2d6 evil humanoids who are on a mission for their dark master, if the PCs defeat them then they will gain XP and random loot as normal. This is good opportunity for GMs to drop in items that hint at the identity of the humanoid\\'s master and can serve as a way to introduce a new villainous mastermind to a campaign.',\n        metadata: {\n            monsters: ['cultist', 'thug', 'cult-fanatic']\n        }\n    },\n    8: {\n        text: 'A small pack of 1d6+2 dogs that escaped from their homes and have gone feral.',\n        metadata: {\n            monsters: ['wolf']\n        }\n    },\n    9: {\n        text: 'A huge troll that makes it\\'s lair under a local bridge, it charges all those who pass 1d6 gold pieces as a toll, attacking those who refuse.',\n        metadata: {\n            monsters: ['troll']\n        }\n    },\n    10: {\n        text: 'A mob of 2d12 torch-wielding people from a local settlement are chasing a mutant, a suspected witch or just someone they don\\'t like very much with the intent of burning them alive for some crime real or imagined (as determined by the GM).',\n        metadata: {\n            monsters: ['commoner']\n        }\n    },\n    11: {\n        text: 'A brutish, inbred Ogre who is part of a tribe inhabiting the hills or mountains nearby, previously they have herded goats and caused little trouble, but a strange blight has killed their herds and now they take to raiding the nearby lowland settlements for food and other items.',\n        metadata: {\n            monsters: ['ogre']\n        }\n    },\n    12: {\n        text: 'A group of 2d6 orcs lurking in nearby hills or forest, they are preparing to attack a nearby settlement once the sun goes down.',\n        metadata: {\n            monsters: ['orc']\n        }\n    }\n};\n\nconst neutralEncounters: EncounterTable = {\n    1: {\n        text: 'A troupe of wandering troubadours and bards who are travelling the land performing plays and looking for stories and legends to add to their repertoire. If the PCs make friendly contact with them there is a 50% chance that the troupe will have heard a legend about any noteworthy beast or location (as determined by the GM).',\n        metadata: { monsters: [] }\n    },\n    2: {\n        text: 'A woodsman returning from a nearby forest to his home in a local village, there is a 2-in-6 chance that he can point the player party in the direction of healing herbs or some such.',\n        metadata: { monsters: [] }\n    },\n    3: {\n        text: 'A small group of dodgy, scruffy looking geezers pushing a barely working wheelbarrow piled high with various ramshackle goods and items. There is a 50% chance that the PCs will find any basic equipment they want if they search the cart and they will get it half-price. However there is a 50% chance the first time that the item is used that it breaks due to poor construction or lack of care, there is also a 1-in-6 chance any item purchased is stolen.',\n        metadata: { monsters: [] }\n    },\n    4: {\n        text: 'A small group of children fishing in a creek, they have caught 1d4 rations worth of fish that they maybe willing to share with the PCs if they ingratiate themselves (as determined by the GM).',\n        metadata: { monsters: [] }\n    },\n    5: {\n        text: 'A group of merchants that have been beset by hostile forces (if you wish you can roll on Table 2 to determine the nature of the hostile forces) whilst moving along a local trade route, when they meet the PCs they are fleeing with their enemies close behind them. If the PCs help the merchants then they will receive a 25% discount on any wares that they purchase from them (what the traders have is determined by the GM).',\n        metadata: { monsters: [] }\n    },\n    6: {\n        text: 'A young couple from a nearby village engaged in a secret tryst, if approached by the PCs they are embarrassed and worried about what their parents will say. In return for the PCs silence they will be able to give them the low-down on important NPCs in their home village.',\n        metadata: { monsters: [] }\n    },\n    7: {\n        text: 'A wealthy trade caravan of merchants and exotic spice dealers with an entourage of guards and mercenaries to protect them. There is a 4-in-6 chance that the caravan will have any basic equipment that the PC requests, and a 2-in-6 chance that the caravan has an exotic items they request (final say on this rests with the GM), however any exotic items will cost 25% more than the listed price due to their fine quality of workmanship.',\n        metadata: { monsters: [] }\n    },\n    8: {\n        text: 'A farmer returning from his fields with a barrow full of fresh produce (1d6 rations worth), if the PCs are friendly then he may be willing to barter items for his produce (although he has little use for coin).',\n        metadata: { monsters: [] }\n    },\n    9: {\n        text: \"A local farmer is taking their sheep, goats or cows (equal chance of either) to a nearby market, they are accompanied by 1d6 young girls and boys who help them manage the herd. The farmer will not be interested in selling his animals - since he knows he'll get a better price at market - but can supply the PCs with all the rumours from nearby villages (as determined by the GM).\",\n        metadata: { monsters: [] }\n    },\n    10: {\n        text: \"A group of local children mock-fighting each other with sticks, wearing old pans and bits of bark as make-shift armour. If the PCs are friendly to them then they'll be able to point them in the direction of the nearest village.\",\n        metadata: { monsters: [] }\n    },\n    11: {\n        text: 'A group of 1d6 woodsmen and rangers who are on the trail of some sort of dangerous beast that has been menacing the nearby settlements. Some of their number were killed in a recent encounter with the beast, they will happily share any rewards and glory with PCs who help them bring the monster down.',\n        metadata: { monsters: [] }\n    },\n    12: {\n        text: \"A noble caravan, it has become stuck in the mud and one of it's wheels has broken. If the PCs are able to repair the wagon or escort the nobles to their destination they will receive a reward of 2d6*10 gold pieces.\",\n        metadata: { monsters: [] }\n    },\n    13: {\n        text: 'The party comes upon a long line of hooded figures. They move slowly, swaying side to side with their hand folded in front of them, and frequently looking skyward. If the party asks what is happening, the figures will respond that they are on a holy pilgrimage for a local deity. They will also describe miracles that they have witnessed personally, and try and convince the party to join them, at least until the next town where there is a renowned prophet who is expected to perform more miracles.',\n        metadata: { monsters: [] }\n    },\n    14: {\n        text: 'An old man shuffles down the road, followed a few paces back by about a dozen people eagerly watching his every move. As the party passes, the man collapses and begins convulsing, and the other travelers surge up and surround him. The party can hear through the excited whispers of the other travelers the old man chanting in Abyssal.',\n        metadata: { monsters: [] }\n    },\n    15: {\n        text: 'A minstrel and two flag bearers are stopped on the road up ahead, along with about a dozen soldiers. The party recognizes them as bearing the crest of a large, well-known kingdom. The minstrel will stop the party and ask them if they had considered joining the local military “for the defense of this fair land from her enemies”. If the party refuses, the soldiers will step forward and the minstrel will ask again, reminding them that all they need to do is sign this agreement that says they will serve in the future. Whatever the players do from this point, they will face consequences next time they return.',\n        metadata: { monsters: [] }\n    },\n    16: {\n        text: 'An overturned cart lies next to the road up ahead. As the players pass it, small rocks come flying out of various holes in the cart. The rocks are small enough that they don’t do any damage and are an annoyance at most. After a few seconds of the barrage, a young child’s voice yells out from under the cart “Give us all your stuff or we won’t stop!”',\n        metadata: { monsters: [] }\n    },\n    17: {\n        text: \"A flock of crows clusters around something up ahead accompanied the shouts of a young woman. As the party approaches, the crows fly off to reveal the corpse of a woman, half-decayed, clutching a stone chest. The small engravings on the chest depict a beautiful woman's face with striking red hair. A green light animates from within the chest along with the voice of the young woman, who thanks the party for scaring off the crows. The voice will deny that anything is unusual and seems unaware that it has no body and can’t move, insisting instead that she’s just tired and needs to rest for a while before continuing her journey.\",\n        metadata: { monsters: [] }\n    },\n    18: {\n        text: 'A calico cat comes wandering down the road. It stops as the party passes and meows/hisses at them loudly. It will follow them around, constantly trying to get the party’s attention; rubbing legs, climbing in backpacks, and scratching up valuable magic items. The cat is actually another traveler who has been polymorphed, who needs to be “killed” for the spell to end.',\n        metadata: { monsters: [] }\n    },\n    19: {\n        text: \"A gnome saunters down the road ahead, carrying under his arm a cage with a chicken inside of it. The gnome appears to be chatting with the chicken until he notices the party, with whom he will engage in friendly conversation. The gnome will quickly turn the subject to his chicken if the party doesn't. According to the gnome “Old Dan’l” can match any animal in the fighting ring, and if the party has any familiars he will offer to set up a fight, with betting of course.\",\n        metadata: { monsters: [] }\n    },\n    20: {\n        text: 'An awful smell wafts up from around a bend in the road. As the party follows it, they find a large, abhorrent corpse curled up on the road; something with black blood and too many limbs. The party also notices sickening sounds of gnawing and slurping coming from the corpse as they approach. Edging around the corpse, the party finds the noise is coming from what looks like a small girl, smeared with black visceral juices, and apparently eating the corpse. If the party confronts her, she will tell them that she won’t share with anyone, no matter how hungry they say they are.',\n        metadata: { monsters: [] }\n    },\n    21: {\n        text: 'A loud thumping is heard from up ahead, and the party can feel the earth rumble beneath their feet. Shortly after the party spots the source, a stone giant plodding down the path. The giant is oddly dressed though, clad in bright colors and flamboyant styles. If the party gets his attention, the giant will ask if they have seen Haakon (“a very loud small one like yourself”). The giant will look despondent when the party says they haven’t but will offer to show them his talent anyway. If the party says yes, the giant will look around briefly before picking up three of the party members and start juggling them.',\n        metadata: { monsters: [] }\n    },\n    22: {\n        text: 'The party come across a large river, too wide and swift to swim across safely. Fortunately, just downstream there are two ferrymen right next to each other, each with their own boat and willing to take the party across. As the party approaches, the ferrymen will both enthusiastically offer their services, but shortly begin arguing with one another. After a little bit, it becomes clear the ferrymen will do almost anything to win the party over to their side, as not many travelers come this way and they are both close to penniless due to the competition.',\n        metadata: { monsters: [] }\n    },\n    23: {\n        text: 'The party hears some low growls and snarls coming from off the road up ahead. Investigating the noise leads the party to an owlbear (or some other suitable animal) caught with its leg in a hunting trap. The owlbear will growl at the party, but it clearly has been here for a while and is in a weakened state. As the party is debating what to do, a man in outlander garb appears. He looks at the party in shock for a second, but then shouts “Thieves! Get out of here, this one’s mine!”',\n        metadata: { monsters: [] }\n    },\n    24: {\n        text: 'A small cart, piled high with stuff, moves down the road towards the party. As the party gets closer, the cart will stop and a merchant will rush out to greet the party. He eagerly offers his wares, but most of it is worthless junk (“combination hookah and coffee maker -- also makes julienne fries”) and horribly overpriced. The merchant will do everything in his power to get the party to stay and buy something, and even if they leave he will follow them, still trying to get a sale.',\n        metadata: { monsters: [] }\n    },\n    25: {\n        text: 'A rhythmic, grinding, sliding sound echoes from the path ahead. Moving toward the noise, the party finds a heavily damaged stone golem dragging itself along the road. The golem has been reduced to just a single arm but is determined to move ahead. It will answer the party’s questions with single-word answers, saying it’s been “called,” but it won’t stop even while talking.',\n        metadata: { monsters: [] }\n    },\n    26: {\n        text: \"The party sees a lone villager walking down the road. He is carrying a large sack over his shoulder and is so preoccupied with nervously looking over his shoulder he doesn't notice the party until they are quite close. Once the party reaches him, he will anxiously try to get through them and deflects any questions, with varying degrees of success. The party does notice that there is a foul smell coming from his sack and the villager never stops looking over his shoulder.\",\n        metadata: { monsters: [] }\n    },\n    27: {\n        text: 'The party hears the sound of someone singing up ahead, but can’t quite make out the words. Once the party gets closer, they see a brightly festooned bard skipping down the path, singing loudly to himself. After listening to a few verses, the party realizes that he is singing about them; their heroic deeds and other exploits. However, he is also singing about things that he has no right to know (a party member’s secret backstory, unsavory things the party did and tried to cover up, etc.).',\n        metadata: { monsters: [] }\n    },\n    28: {\n        text: 'Rounding a corner, the party finds that the narrow path has been completely blocked. A huge silver dragon is snoozing right in the middle of the path, it’s stomach clearly bloated with the dragon’s latest meal. If the dragon is woken by the party (intentionally or unintentionally), she will immediately apologize for the inconvenience, but reveals that she is too full to move.',\n        metadata: { monsters: [] }\n    },\n    29: {\n        text: 'Shouts come from up ahead on the road. The party runs to investigate and find themselves facing a tense standoff between two identical-looking young men. They both have their swords drawn and are slowly circling each other while a young woman clutching two small children watches nervously. One says he was returning from a business trip when he found his doppelganger leading his family away; the other says he returned early from that trip to save his family from the danger he discovered they were in.',\n        metadata: { monsters: [] }\n    },\n    30: {\n        text: 'As the party approaches a bend in the road, a carriage suddenly comes careening around the corner at tremendous speed. Spotting the party too late, the driver tries to swerve away but ends up losing traction and causing the carriage to topple over. Immediately after the crash, the driver gets up off the ground, draws his sword, and quickly runs to put himself between the shocked party and the downed carriage. “Stay back!” he says, “Don’t come any closer!” Between the shouts of the driver, the party can hear a multitude of whispers coming from the carriage.',\n        metadata: { monsters: [] }\n    }\n};\n\nconst featureEncounters: EncounterTable = {\n    1: {\n        text: 'A huge cairn of stones carved with strange symbols rises from the nearby landscape, it is either a marker or the burial place of some forgotten hero (equal chance of each).',\n        metadata: { monsters: [] }\n    },\n    2: {\n        text: \"A farmer's hut and a field groaning with produce, however the cabin seems to have been abandoned and all possessions–save the produce in the field–taken. PCs may freely take a total of 2d6 days worth of rations from the field, however there is a 50% chance that the produce is infected with a blight, consumption of blighted rations causes the PC to vomit for 1d4 damage.\",\n        metadata: { monsters: [] }\n    },\n    3: {\n        text: \"A single mighty tree rises from the ground here, it is many hundreds of years old and has millennia of carvings covering it's trunk. Some of these carvings may hint at local history or lore.\",\n        metadata: { monsters: [] }\n    },\n    4: {\n        text: 'Large worn slabs of stone bearing faint markings attest to this area having once been used as a graveyard, however it is long abandoned and extremely overgrown, but their may be underground tombs and grave goods in the area (as determined by the GM).',\n        metadata: { monsters: [] }\n    },\n    5: {\n        text: 'The remnants of what must have once been a village cover this area, it seems as though it burnt down some time ago, although there may still be the odd item (or danger) lurking amidst the charred ruins.',\n        metadata: { monsters: [] }\n    },\n    6: {\n        text: \"A mighty Oak whose trunk appears to have the pattern of a face visible in the lines and cracks of it's bark. Local legend says that when the whole land was once covered by a huge forest, great creatures, caretakers of the natural world moved across the land caring for the trees. With the coming of man they slept, but are best avoided lest they wake and be roused to furious anger.\",\n        metadata: { monsters: [] }\n    },\n    7: {\n        text: 'A crooked stone tower rises at a jaunty angle into the sky, the barely-visible roof is missing a number of slates, their smashed remnants litter the ground around it. The tower belongs to an eccentric sage, reclusive hermit or tormented prophet (equal chance of each).',\n        metadata: { monsters: [] }\n    },\n    8: {\n        text: 'Pillars of rock rising from the ground, years ago primitive people carved homes in these huge pillars before some event caused them to abandon their rocky homes.',\n        metadata: { monsters: [] }\n    },\n    9: {\n        text: 'The remnants of what must have been an expensive cart lie just off the road here, there are 1d6 skeletons and the long-dead bodies of the horses scattered nearby. Examination of the cart results in finding 1d6 gold pieces and a miscellaneous lesser piece of equipment, along with clues that the cart was waylaid–and the occupants murdered–by bandits.',\n        metadata: { monsters: [] }\n    },\n    10: {\n        text: 'A tree with nooses hanging from the branches, local settlements use this tree to execute criminals who have committed capital crimes, when not in use the place has an evil reputation and is avoided.',\n        metadata: { monsters: [] }\n    },\n    11: {\n        text: 'A great stone circle has been erected here, whether as some sort of solar calendar or as a means of communing with the gods it is not clear, but locals either revered the place and worship there or whisper of it as haunted and avoid it entirely (equal chance of each).',\n        metadata: { monsters: [] }\n    },\n    12: {\n        text: 'A rocky outcropping that vaguely resembles a huge, sleeping humanoid. Local villagers say that it is a giant who once menaced these parts before he was forced into an eternal slumber by a great and powerful sorcerer.',\n        metadata: { monsters: [] }\n    }\n};\n\nexport const nothingEvent: Encounter = {\n    text: 'Nothing eventful happens.',\n    metadata: {\n        monsters: []\n    }\n};\n\nexport function useEncounters() {\n    const getWeightedEncounterType = useCallback(() => {\n        return chance.weighted(Object.keys(weightedEncounterTypes), Object.values(weightedEncounterTypes));\n    }, []);\n\n    const forceHostileEncounter = useCallback((): Encounter => {\n        const encounterRoll = chance.natural({ min: 1, max: Object.keys(hostileEncounters).length });\n        return hostileEncounters[encounterRoll];\n    }, []);\n\n    const forceNeutralEncounter = useCallback((): Encounter => {\n        const encounterRoll = chance.natural({ min: 1, max: Object.keys(neutralEncounters).length });\n        return neutralEncounters[encounterRoll];\n    }, []);\n\n    const forceFeatureEncounter = useCallback((): Encounter => {\n        const encounterRoll = chance.natural({ min: 1, max: Object.keys(hostileEncounters).length });\n        return featureEncounters[encounterRoll];\n    }, [])\n\n    const forceEncounter = useCallback((): Encounter => {\n        switch (getWeightedEncounterType()) {\n            case 'hostile':\n                return forceHostileEncounter();\n            case 'neutral':\n                return forceNeutralEncounter();\n            case 'feature':\n                return forceFeatureEncounter();\n            default:\n                return nothingEvent;\n        }\n    }, [forceHostileEncounter, forceNeutralEncounter, forceFeatureEncounter, getWeightedEncounterType]);\n\n    const generateNightEncounter = useCallback((): Encounter => {\n        if (chance.d20() === 1) {\n            return forceHostileEncounter();\n        } else {\n            return nothingEvent;\n        }\n    }, [forceHostileEncounter]);\n\n    const generateEncounter = useCallback((generator: GeneratorDie): Encounter => {\n        if (chance[generator]() === 1) {\n            return forceEncounter();\n        } else {\n            return nothingEvent;\n        }\n    }, [forceEncounter]);\n\n    return {\n        generateEncounter,\n        generateNightEncounter,\n        forceEncounter,\n        forceHostileEncounter,\n        forceNeutralEncounter,\n        forceFeatureEncounter\n    };\n}","import React from 'react';\nimport Icon from '@ant-design/icons';\nimport { useThemeSwitcher } from 'react-css-theme-switcher';\n\nconst TravelerD20Svg = () => {\n    const { currentTheme } = useThemeSwitcher();\n\n    return (\n        <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"810\"\n             height=\"1em\" width=\"1em\">\n            <defs>\n                <style type=\"text/css\"></style>\n            </defs>\n            <path\n                fill={currentTheme === 'light' ? '#ff4d4f' : '#a61d24'}\n                d=\"M245.490241 430.114422L34.392979 741.890379c-6.15992 9.99987 0.199997 22.999702 11.859846 24.279685l416.514598 44.139427-217.277182-380.195069zM46.812818 630.851819L197.390865 386.154992 44.112853 294.196185c-5.339931-3.199959-12.119843 0.639992-12.119843 6.859911v325.615777c0 8.059895 10.579863 11.059857 14.819808 4.179946zM68.492537 847.189013l388.794957 175.317726c10.599863 4.899936 22.699706-2.859963 22.699706-14.519811v-131.338297l-407.09472-44.599422c-8.899885-0.999987-12.459838 11.179855-4.399943 15.139804z m162.437893-515.553314L390.788357 45.759407c8.679887-14.119817-7.179907-30.499604-21.559721-22.279712L67.612548 220.697138c-4.939936 3.239958-4.779938 10.519864 0.259997 13.559824l163.057885 97.378737zM511.986785 351.995435h218.417167L539.246432 15.239802C532.986513 5.079934 522.486649 0 511.986785 0s-20.999728 5.079934-27.259646 15.239802L293.569618 351.995435H511.986785z m467.873932-57.79925l-153.278012 91.978807 150.578047 244.696826c4.219945 6.879911 14.819808 3.87995 14.819808-4.199945V301.056096c0-6.219919-6.779912-10.05987-12.119843-6.859911z m-186.817577 37.439514l163.057885-97.398737c5.059934-3.039961 5.199933-10.319866 0.259997-13.559824l-301.616088-197.197443c-14.379814-8.219893-30.239608 8.159894-21.559721 22.279712l159.857927 285.876292z m158.037951 500.41351L543.98637 876.628631v131.338297c0 11.679849 12.099843 19.419748 22.699706 14.519812l388.794958-175.317727c8.059895-3.939949 4.499942-16.119791-4.399943-15.119804z m-172.597762-401.934787l-217.257182 380.195069 416.514598-44.139427c11.659849-1.299983 18.019766-14.279815 11.859846-24.279685L778.483329 430.114422zM511.986785 415.994605H311.12939L511.986785 767.490047 712.84418 415.994605H511.986785z\"\n                p-id=\"811\"></path>\n        </svg>\n    );\n};\n\nconst TravelerD20 = (props: any) => {\n    return <Icon component={TravelerD20Svg} {...props} />\n}\n\nexport default TravelerD20;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { Monster } from '../../types/monster';\n\nexport interface InitiativePlayerCharacter {\n    id: string;\n    initiative: number;\n    type: 'player';\n}\n\nexport interface InitiativeNonPlayerCharacter extends Monster {\n    id: string;\n    currentHP: number;\n    type: 'npc';\n    initiative: number;\n}\n\nexport type InitiativeEntity = InitiativePlayerCharacter | InitiativeNonPlayerCharacter;\n\ninterface InitiativeState {\n    entities: InitiativeEntity[];\n    currentInitiative: number;\n    currentRound: 0\n}\n\nconst initialInitiativeState: InitiativeState = {\n    entities: [],\n    currentInitiative: 100,\n    currentRound: 0\n}\n\nconst initiativeSlice = createSlice({\n    name: 'initiative',\n    initialState: initialInitiativeState,\n    reducers: {\n        addEntity(state, action: PayloadAction<InitiativeEntity>) {\n            state.entities.push(action.payload);\n        },\n        editEntity(state, action: PayloadAction<{ id: string, initiative?: number, currentHP?: number }>) {\n            const entity = state.entities.find(e => e.id === action.payload.id);\n\n            if (entity) {\n                if (action.payload.initiative !== undefined) {\n                    entity.initiative = action.payload.initiative;\n                }\n\n                if (action.payload.currentHP !== undefined && entity.type === 'npc') {\n                    entity.currentHP = action.payload.currentHP;\n                }\n            }\n        },\n        removeEntity(state, action: PayloadAction<string>) {\n            state.entities = state.entities.filter(e => e.id !== action.payload);\n        },\n        setEntities(state, action: PayloadAction<InitiativeEntity[]>) {\n            state.entities = action.payload;\n        },\n        nextInitiative(state) {\n            const entitiesAfterCurrentInitiative = state.entities.filter(e => e.initiative < state.currentInitiative);\n\n            if (entitiesAfterCurrentInitiative.length === 0) {\n                state.currentInitiative = Math.max.apply(null, state.entities.map(e => e.initiative));\n                state.currentRound++;\n            } else {\n                state.currentInitiative = Math.max.apply(null, entitiesAfterCurrentInitiative.map(e => e.initiative));\n            }\n        },\n        resetInitiative(state) {\n            state.currentInitiative = 100;\n            state.currentRound = 0;\n        }\n    }\n});\n\nexport const {addEntity, editEntity, setEntities, nextInitiative, resetInitiative, removeEntity} = initiativeSlice.actions;\nexport default initiativeSlice.reducer;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Action, Monster } from '../../types/monster';\nimport { Button, Card, Col, PageHeader, Row, Tag, Typography, Space, notification, Select } from 'antd';\nimport styles from './MonsterCard.module.css';\nimport { capitalize, getAbilityModifier, makeCancelable } from '../../util/utilities';\nimport TravelerD20 from '../../assets/icons/d20';\nimport * as dice from 'dice.js';\nimport { useDispatch } from 'react-redux';\nimport { addEntity } from '../../store/initiative/initiative.slice';\nimport Chance from 'chance';\n\nconst chance = new Chance();\n\ninterface MonsterCardProps {\n    monster: string;\n    rollInitiative?: boolean;\n}\n\nconst MonsterCard = (props: MonsterCardProps) => {\n    const dispatch = useDispatch();\n    const [loading, setLoading] = useState(false);\n    const [monster, setMonster] = useState<Monster>();\n    const [rollInitiativeCount, setRollInitiativeCount] = useState<number>(1);\n\n    const rollAction = (action: Action) => {\n        if (action.damage_dice) {\n            const attackRoll = +dice.roll('d20');\n            const attackRollWithBonus = attackRoll + (action.attack_bonus || 0);\n            const damageRoll = (attackRoll === 20 ?\n                +dice.roll(action.damage_dice) + +dice.roll(action.damage_dice) :\n                +dice.roll(action.damage_dice)) + (action.damage_bonus || 0);\n\n            const RollResult = (\n                <div>\n                    <Typography.Paragraph className={styles.monsterParagraph}>\n                        <Typography.Text strong>Attack Roll: </Typography.Text>{attackRollWithBonus}\n                    </Typography.Paragraph>\n\n                    <Typography.Paragraph className={styles.monsterParagraph}>\n                        <Typography.Text strong>Damage Roll: </Typography.Text>{attackRoll === 20 && 'Critical Hit! '}{damageRoll} damage.\n                    </Typography.Paragraph>\n                </div>\n            );\n\n            notification.open({\n                message: `Attack Roll for ${capitalize(action.name)}`,\n                description: RollResult\n            })\n        }\n    };\n\n    const rollInitiative = useCallback(() => {\n        if (monster) {\n            const monsterCount = new Array(rollInitiativeCount);\n            monsterCount.fill(monster);\n\n            for (const m of monsterCount) {\n                dispatch(addEntity({\n                    ...m,\n                    initiative: dice.roll('d20') + getAbilityModifier(m.dexterity),\n                    id: chance.guid(),\n                    currentHP: m.hit_points,\n                    type: 'npc'\n                }));\n            }\n        }\n    }, [dispatch, monster, rollInitiativeCount]);\n\n    const rollInitiativeCountHandler = useCallback((value: number) => {\n        setRollInitiativeCount(value);\n    }, []);\n\n    useEffect(() => {\n        console.log('props changed', props);\n        const fetchMonster = makeCancelable(fetch(`https://api.open5e.com/monsters/${props.monster}`));\n        setLoading(true);\n\n        fetchMonster\n            .promise\n            .then(response => response.json())\n            .then(response => {\n                setLoading(false);\n                setMonster(response);\n            })\n            .catch(console.error);\n\n        return () => {\n            setLoading(false);\n            fetchMonster.cancel();\n        }\n    }, [props]);\n\n    return (\n        <Card loading={loading} className={styles.monsterCard}>\n            {monster && (\n                <>\n                    <PageHeader\n                        title={(\n                            <a\n                                target=\"_blank\"\n                                href={`https://www.dndbeyond.com/monsters/${monster.slug}`}\n                                rel=\"noopener noreferrer\"\n                                style={{\n                                    fontFamily: 'Mr Eaves Small Caps, Helvetica, sans-serif',\n                                    fontSize: '1.5em',\n                                    color: '#822000'\n                                }}\n                            >\n                                {monster.name}\n                            </a>\n                        )}\n                        subTitle={`${monster.size} ${monster.type}, ${monster.alignment}`}\n                        tags={<Tag color=\"red\">CR {monster.challenge_rating}</Tag>}\n                        extra={[\n                            <div key={1}>\n                                {props.rollInitiative && (\n                                    <Space>\n                                        <Select\n                                            value={rollInitiativeCount}\n                                            onChange={rollInitiativeCountHandler}\n                                        >\n                                            <Select.Option value={1}>x1</Select.Option>\n                                            <Select.Option value={2}>x2</Select.Option>\n                                            <Select.Option value={3}>x3</Select.Option>\n                                            <Select.Option value={4}>x4</Select.Option>\n                                            <Select.Option value={5}>x5</Select.Option>\n                                            <Select.Option value={6}>x6</Select.Option>\n                                            <Select.Option value={7}>x7</Select.Option>\n                                            <Select.Option value={8}>x8</Select.Option>\n                                        </Select>\n\n                                        <Button key={1} danger onClick={rollInitiative}>\n                                            <TravelerD20 />\n                                            Roll Initiative!\n                                        </Button>\n                                    </Space>\n                                )}\n                            </div>\n                        ]}\n                    >\n                        <Row gutter={16}>\n                            <Col span={12}>\n                                <hr />\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Armor Class</Typography.Text> {monster.armor_class} ({monster.armor_desc})\n                                </Typography.Paragraph>\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Hit Points</Typography.Text> {monster.hit_points} ({monster.hit_dice})\n                                </Typography.Paragraph>\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Speed</Typography.Text>{' '}\n                                    {monster.speed.walk} ft.\n                                    {monster.speed.fly && `, fly ${monster.speed.fly} ft.`}\n                                    {monster.speed.swim && `, swim ${monster.speed.swim} ft.`}\n                                </Typography.Paragraph>\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Initiative</Typography.Text> {monster.dexterity >= 10 && '+'}{getAbilityModifier(monster.dexterity)}\n                                </Typography.Paragraph>\n\n                                <hr />\n\n                                <Row>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"STR\" score={monster.strength} />\n                                    </Col>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"DEX\" score={monster.dexterity} />\n                                    </Col>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"CON\" score={monster.constitution} />\n                                    </Col>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"INT\" score={monster.intelligence} />\n                                    </Col>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"WIS\" score={monster.wisdom} />\n                                    </Col>\n                                    <Col span={4}>\n                                        <AbilityScore ability=\"CHA\" score={monster.charisma} />\n                                    </Col>\n                                </Row>\n\n                                <hr />\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <SavingThrows monster={monster} />\n                                </Typography.Paragraph>\n\n                                {Object.keys(monster.skills).length > 0 && (\n                                    <Typography.Paragraph className={styles.monsterParagraph}>\n                                        <Typography.Text strong>Skills </Typography.Text>\n                                        {Object.keys(monster.skills).map((skill, i) => (\n                                            <Typography.Text key={i}>\n                                                {capitalize(skill)} +{monster?.skills[skill]}\n                                                {Object.keys(monster.skills).length - 1 !== i ? ', ' : ''}</Typography.Text>\n                                        ))}\n                                    </Typography.Paragraph>\n                                )}\n\n                                {monster.damage_immunities && (\n                                    <Typography.Paragraph className={styles.monsterParagraph}>\n                                        <Typography.Text strong>Damage Immunities </Typography.Text>\n                                        <Typography.Text>{capitalize(monster.damage_immunities)}</Typography.Text>\n                                    </Typography.Paragraph>\n                                )}\n\n                                {monster.damage_resistances && (\n                                    <Typography.Paragraph className={styles.monsterParagraph}>\n                                        <Typography.Text strong>Damage Resistances </Typography.Text>\n                                        <Typography.Text>{capitalize(monster.damage_resistances)}</Typography.Text>\n                                    </Typography.Paragraph>\n                                )}\n\n                                {monster.damage_vulnerabilities && (\n                                    <Typography.Paragraph className={styles.monsterParagraph}>\n                                        <Typography.Text strong>Damage Vulnerabilities </Typography.Text>\n                                        <Typography.Text>{capitalize(monster.damage_vulnerabilities)}</Typography.Text>\n                                    </Typography.Paragraph>\n                                )}\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Senses </Typography.Text>\n                                    <Typography.Text>{monster.senses.split(' ').map(capitalize).join(' ')}</Typography.Text>\n                                </Typography.Paragraph>\n\n                                <Typography.Paragraph className={styles.monsterParagraph}>\n                                    <Typography.Text strong>Languages </Typography.Text>\n                                    <Typography.Text>{monster.languages.split(' ').map(capitalize).join(' ')}</Typography.Text>\n                                </Typography.Paragraph>\n\n                                {Array.isArray(monster.special_abilities) && (\n                                    <>\n                                        <hr />\n\n                                        {monster.special_abilities.map((ability, i) => (\n                                            <Typography.Paragraph className={styles.monsterParagraph} key={i}>\n                                                <Typography.Text strong>{ability.name} </Typography.Text>\n                                                <Typography.Text>{ability.desc}</Typography.Text>\n                                            </Typography.Paragraph>\n                                        ))}\n                                    </>\n                                )}\n\n                                {Array.isArray(monster.legendary_actions) && (\n                                    <>\n                                        <hr />\n\n                                        <Typography.Title level={4}>Legendary Actions</Typography.Title>\n\n                                        <Typography.Paragraph>\n                                            <i>{monster.legendary_desc}</i>\n                                        </Typography.Paragraph>\n\n                                        {monster.legendary_actions.map((action, i) => (\n                                            <Typography.Paragraph className={styles.monsterParagraph} key={i}>\n                                                <Typography.Text strong>{action.name}. </Typography.Text>\n                                                <Typography.Text>{action.desc}</Typography.Text>\n                                            </Typography.Paragraph>\n                                        ))}\n                                    </>\n                                )}\n                            </Col>\n\n                            <Col span={12}>\n                                <Typography.Title level={4}>Actions</Typography.Title>\n\n                                {monster.actions.map((action, i) => (\n                                    <Typography.Paragraph className={styles.monsterParagraph} key={i}>\n                                        <Typography.Text strong>{action.name}. </Typography.Text>\n                                        <Typography.Text>{action.desc}</Typography.Text>\n                                    </Typography.Paragraph>\n                                ))}\n\n                                <Space>\n                                    {monster.actions.filter(action => action.damage_dice).map((action, i) => (\n                                        <Button danger onClick={() => rollAction(action)} key={i}>\n                                            <TravelerD20 />\n                                            {capitalize(action.name)}\n                                        </Button>\n                                    ))}\n                                </Space>\n                            </Col>\n                        </Row>\n                    </PageHeader>\n                </>\n            )}\n        </Card>\n    )\n};\n\ntype AbilityScoreType = 'STR' | 'DEX' | 'CON' | 'INT' | 'WIS' | 'CHA';\n\ntype SavingThrowMap = {\n    [key in AbilityScoreType]: number | null;\n}\n\nconst SavingThrows = ({ monster }: { monster: Monster }) => {\n    const savingThrowMap: SavingThrowMap = {\n        STR: monster.strength_save,\n        DEX: monster.dexterity_save,\n        CON: monster.constitution_save,\n        INT: monster.intelligence_save,\n        WIS: monster.wisdom_save,\n        CHA: monster.charisma_save\n    };\n\n    const savingThrowKeys = Object.keys(savingThrowMap).filter(save => savingThrowMap[save as AbilityScoreType]);\n\n    return (\n        <>\n            {savingThrowKeys.length > 0 && <Typography.Text strong>Saving Throws </Typography.Text>}\n\n            {\n                savingThrowKeys.map((save, i) => {\n                    const saveAsType = save as AbilityScoreType;\n\n                    return (\n                        <Typography.Text key={i}>\n                            {save} +{savingThrowMap[saveAsType]}\n                            {savingThrowKeys.length - 1 !== i ? ', ' : ''}\n                        </Typography.Text>\n                    )\n                })\n            }\n        </>\n    )\n};\n\nconst AbilityScore = ({ ability, score }: { ability: string, score: number }) => {\n    const modifier = getAbilityModifier(score);\n    const formattedModifier = modifier >= 0 ? `+${modifier}` : modifier;\n\n    return (\n        <div style={{textAlign: 'center'}}>\n            <Typography.Paragraph style={{marginBottom: 0}} strong>{ability}</Typography.Paragraph>\n            <Typography.Paragraph style={{marginBottom: 0}}>{score} ({formattedModifier})</Typography.Paragraph>\n        </div>\n    );\n};\n\nexport default React.memo(MonsterCard);\n","import React, { useCallback } from 'react';\n\nimport { Encounter, GeneratorDie, nothingEvent, useEncounters } from '../../util/use-encounters';\nimport { useEffect, useState } from 'react';\nimport { Button, Select, Space, Tooltip, Typography, Tabs } from 'antd';\nimport dice from 'dice.js';\nimport Chance from 'chance';\nimport MonsterCard from '../MonsterCard/MonsterCard';\nimport { formatName } from '../../util/utilities';\nimport { subscribe } from 'redux-subscriber';\n\nconst chance = new Chance.Chance();\n\nconst TravelerEncounters = () => {\n    const { generateEncounter, generateNightEncounter, forceEncounter, forceHostileEncounter, forceNeutralEncounter, forceFeatureEncounter } = useEncounters();\n\n    const [currentEncounter, setCurrentEncounter] = useState<Encounter>(nothingEvent);\n    const [forceEncounterType, setForceEncounterType] = useState('random');\n    const [generatorDie, setGeneratorDie] = useState<GeneratorDie>('d10');\n\n    useEffect(() => {\n        const unsub = subscribe('time.hour', state => {\n            if (state.time.hour < 6 || state.time.hour > 20) {\n                setCurrentEncounter(generateNightEncounter());\n            } else {\n                setCurrentEncounter(generateEncounter(generatorDie));\n            }\n        });\n\n        return () => {\n            unsub();\n        }\n    }, [generateEncounter, generateNightEncounter, generatorDie]);\n\n    useEffect(() => {\n        const storedGeneratorDie = localStorage.getItem('traveler-generator-die') as GeneratorDie | null;\n\n        if (storedGeneratorDie) {\n            setGeneratorDie(storedGeneratorDie);\n        }\n    }, []);\n\n    const parsedEncounter = useCallback(() => {\n        if (!currentEncounter) {\n            return null;\n        }\n\n        const encounterStrArray = currentEncounter.text.split(' ');\n        const encounterJsx = encounterStrArray.map(word => {\n            const regex = /(\\d+)?d(\\d+)([+-]\\d+)?/ig;\n\n            if (regex.test(word)) {\n                return (\n                    <span key={chance.guid()}>\n                        <Tooltip title={'Roll: ' + dice.roll(word.toLowerCase()).toString()}>\n                            <Typography.Text mark>{word}</Typography.Text>\n                        </Tooltip>\n                        {' '}\n                    </span>\n                );\n            } else {\n                return <Typography.Text key={chance.guid()}>{word + ' '}</Typography.Text>;\n            }\n        });\n\n        return (\n            <Typography.Paragraph>{encounterJsx}</Typography.Paragraph>\n        )\n    }, [currentEncounter]);\n\n    const setEncounter = useCallback(() => {\n        switch (forceEncounterType) {\n            case 'random':\n                setCurrentEncounter(forceEncounter());\n                break;\n            case 'hostile':\n                setCurrentEncounter(forceHostileEncounter());\n                break;\n            case 'neutral':\n                setCurrentEncounter(forceNeutralEncounter());\n                break;\n            case 'feature':\n                setCurrentEncounter(forceFeatureEncounter());\n                break;\n        }\n    }, [forceEncounter, forceHostileEncounter, forceNeutralEncounter, forceFeatureEncounter, forceEncounterType]);\n\n    const forceEncounterChangeHandler = useCallback((value: string) => {\n        setForceEncounterType(value);\n    }, []);\n\n    const generatorDieHandler = useCallback((value: GeneratorDie) => {\n        setGeneratorDie(value);\n        localStorage.setItem('traveler-generator-die', value);\n    }, [setGeneratorDie]);\n\n    return (\n        <div>\n            <Typography.Paragraph>{parsedEncounter()}</Typography.Paragraph>\n\n            <div style={{display: 'flex'}}>\n                <Space>\n                    <Select\n                        defaultValue=\"random\"\n                        onChange={forceEncounterChangeHandler}\n                    >\n                        <Select.Option value=\"random\">Random</Select.Option>\n                        <Select.Option value=\"hostile\">Hostile</Select.Option>\n                        <Select.Option value=\"neutral\">Neutral</Select.Option>\n                        <Select.Option value=\"feature\">Feature</Select.Option>\n                    </Select>\n\n                    <Button type=\"primary\" danger onClick={setEncounter}>Force Encounter</Button>\n                </Space>\n\n                <div style={{flex: 'auto'}} />\n\n                <Space>\n                    <Tooltip title=\"Night encounters are always hostile, so the chance is always 1d20.\">\n                        <Typography.Text strong>Day Encounter Chance</Typography.Text>\n                    </Tooltip>\n\n                    <Select\n                        value={generatorDie}\n                        onChange={generatorDieHandler}\n                    >\n                        <Select.Option value=\"d4\">1d4</Select.Option>\n                        <Select.Option value=\"d6\">1d6</Select.Option>\n                        <Select.Option value=\"d8\">1d8</Select.Option>\n                        <Select.Option value=\"d10\">1d10</Select.Option>\n                        <Select.Option value=\"d12\">1d12</Select.Option>\n                        <Select.Option value=\"d20\">1d20</Select.Option>\n                    </Select>\n                </Space>\n            </div>\n\n            <Tabs defaultActiveKey=\"1\">\n                {currentEncounter && currentEncounter.metadata.monsters.map((monster, i) => (\n                    <Tabs.TabPane tab={formatName(monster)} tabKey={i.toString()} key={i}>\n                        <MonsterCard monster={monster} rollInitiative />\n                    </Tabs.TabPane>\n                ))}\n            </Tabs>\n        </div>\n    );\n};\n\nexport default TravelerEncounters;","import { TravelerWeatherState, TravelerWeatherType } from '../store/weather/weather.slice';\nimport * as Chance from 'chance';\nimport { useCallback } from 'react';\nimport { TravelerTime } from '../store/time/time.slice';\n\ntype WeightedWeather = {\n    [key in TravelerWeatherType]: number;\n}\n\nconst springWeightedWeather: WeightedWeather = {\n    clear: 36,\n    cloudy: 14,\n    rain: 7,\n    storm: 2,\n    snow: 0,\n    blizzard: 0,\n    tornado: 1\n}\n\nconst summerWeightedWeather: WeightedWeather = {\n    clear: 44,\n    cloudy: 8,\n    rain: 3,\n    storm: 3,\n    snow: 0,\n    blizzard: 0,\n    tornado: 2\n}\n\nconst fallWeightedWeather: WeightedWeather = {\n    clear: 44,\n    cloudy: 11,\n    rain: 4,\n    storm: 1,\n    snow: 0,\n    blizzard: 0,\n    tornado: 0\n}\n\nconst winterWeightedWeather: WeightedWeather = {\n    clear: 36,\n    cloudy: 14,\n    rain: 2,\n    storm: 1,\n    snow: 6,\n    blizzard: 1,\n    tornado: 0\n}\n\nconst chance = new Chance.Chance();\n\nexport function useWeather() {\n    const getWeightedWeather = useCallback((weightedWeather: WeightedWeather): TravelerWeatherType => {\n        return chance.weighted(\n            Object.keys(weightedWeather),\n            Object.values(weightedWeather)) as TravelerWeatherType;\n    }, []);\n\n    const generateVariance = useCallback((average: number, variance: number): number => {\n        return Math.floor(average + (Math.random() * variance) * (Math.random() > 0.5 ? -1 : 1));\n    }, []);\n\n    const generateWeather = useCallback((time: TravelerTime): TravelerWeatherState => {\n        switch (time.season) {\n            case 'spring':\n                return {\n                    weatherType: getWeightedWeather(springWeightedWeather),\n                    temperature: generateVariance(65, 20),\n                    windSpeed: generateVariance(12, 6)\n                };\n            case 'summer':\n                return {\n                    weatherType: getWeightedWeather(summerWeightedWeather),\n                    temperature: generateVariance(80, 15),\n                    windSpeed: generateVariance(8, 4)\n                };\n            case 'fall':\n                return {\n                    weatherType: getWeightedWeather(fallWeightedWeather),\n                    temperature: generateVariance(60, 20),\n                    windSpeed: generateVariance(10, 5)\n                };\n            case 'winter':\n                const weather = getWeightedWeather(winterWeightedWeather);\n                const temperature = weather === 'snow' || weather === 'blizzard' ?\n                    Math.min(32, generateVariance(40, 20)) :\n                    generateVariance(40, 20);\n\n                return {\n                    weatherType: weather,\n                    temperature: temperature,\n                    windSpeed: generateVariance(10, 5)\n                }\n        }\n    }, [generateVariance, getWeightedWeather]);\n\n    return {\n        generateWeather\n    }\n}","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type TravelerWeatherType = 'clear' | 'cloudy' | 'rain' | 'storm' | 'snow' | 'blizzard' | 'tornado';\n\nexport interface TravelerWeatherState {\n    weatherType: TravelerWeatherType;\n    temperature: number;\n    windSpeed: number;\n}\n\nconst initialState: TravelerWeatherState = {\n    weatherType: 'clear',\n    temperature: 71,\n    windSpeed: 6\n};\n\nconst weatherSlice = createSlice({\n    name: 'weather',\n    initialState,\n    reducers: {\n        setWeather(state, action: PayloadAction<TravelerWeatherState>) {\n            state.weatherType = action.payload.weatherType;\n            state.temperature = action.payload.temperature;\n            state.windSpeed = action.payload.windSpeed;\n        },\n        setWeatherType(state, action: PayloadAction<TravelerWeatherType>) {\n            state.weatherType = action.payload;\n        },\n        setTemperature(state, action: PayloadAction<number>) {\n            state.temperature = action.payload;\n        },\n        setWindSpeed(state, action: PayloadAction<number>) {\n            state.windSpeed = action.payload;\n        }\n    }\n});\n\nexport const { setWeather, setWeatherType, setTemperature, setWindSpeed } = weatherSlice.actions;\nexport default weatherSlice.reducer;","import React, { useCallback, useEffect } from 'react';\nimport { useWeather } from '../../util/use-weather';\nimport { setWeather } from '../../store/weather/weather.slice';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport { Button, Typography } from 'antd';\nimport { capitalize } from '../../util/utilities';\nimport { TravelerTime } from '../../store/time/time.slice';\n\nconst TravelerWeather = () => {\n    const dispatch = useDispatch();\n    const time = useSelector((state: RootState) => state.time);\n    const weather = useSelector((state: RootState) => state.weather);\n    const { generateWeather } = useWeather();\n\n    const forceGenerate = useCallback((time: TravelerTime) => {\n        const generatedWeather = generateWeather(time);\n        dispatch(setWeather(generatedWeather));\n    }, [generateWeather, dispatch]);\n\n    const forceGenerateHandler = useCallback(() => {\n        forceGenerate(time);\n    }, [time, forceGenerate]);\n\n    useEffect(() => {\n        if ((time.hour % 6 === 0)) {\n            forceGenerate(time);\n        }\n    }, [time, forceGenerate]);\n\n    useEffect(() => {\n    }, [time]);\n\n    useEffect(() => {\n    }, [forceGenerate]);\n\n    return (\n        <div>\n            <Typography.Paragraph>\n                <Typography.Text strong>Weather Conditions: </Typography.Text>\n                <Typography.Text>{capitalize(weather.weatherType || '')}</Typography.Text>\n            </Typography.Paragraph>\n\n            <Typography.Paragraph>\n                <Typography.Text strong>Temperature: </Typography.Text>\n                <Typography.Text>{weather.temperature}°F</Typography.Text>\n            </Typography.Paragraph>\n\n            <Typography.Paragraph>\n                <Typography.Text strong>Wind Speed: </Typography.Text>\n                <Typography.Text>{weather.windSpeed}mph</Typography.Text>\n            </Typography.Paragraph>\n\n            <Button type=\"primary\" danger onClick={forceGenerateHandler}>Force Change</Button>\n        </div>\n    )\n};\n\nexport default TravelerWeather;","import React, { useCallback, useEffect, useState } from 'react';\nimport { Monster } from '../../types/monster';\nimport { Space, Tag, AutoComplete, Typography, Tooltip } from 'antd';\nimport { debounce } from 'lodash';\n\nconst renderItem = (monster: Monster) => {\n    return {\n        value: monster.slug,\n        label: (\n            <div\n                style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                }}\n            >\n                <Typography.Text ellipsis>{monster.name}</Typography.Text>\n                <Space>\n                    <Tag color=\"red\">CR {monster.challenge_rating}</Tag>\n                    <Tag color=\"blue\">HP {monster.hit_points}</Tag>\n                </Space>\n            </div>\n        )\n    }\n}\n\ninterface MonsterSearchProps {\n    onResult: (monster: Monster) => void;\n}\n\nconst MonsterSearch = (props: MonsterSearchProps) => {\n    const { onResult } = props;\n    const [searchResults, setSearchResults] = useState<Monster[]>([]);\n    const [searchTerm, setSearchTerm] = useState();\n\n    const searchForMonsters = useCallback(debounce((search: string) => {\n        if (search) {\n            fetch(`https://api.open5e.com/monsters/?search=${search}`)\n                .then(response => response.json())\n                .then(response => setSearchResults(response.results))\n                .catch(console.error);\n        }\n    }, 500), []);\n\n    const selectHandler = useCallback((value: string) => {\n        const monster = searchResults.find(m => m.slug === value);\n\n        if (monster) {\n            onResult(monster);\n            setSearchTerm('');\n            setSearchResults([]);\n        }\n    }, [searchResults, onResult]);\n\n    const searchTermHandler = (value: string) => {\n        setSearchTerm(value);\n    }\n\n    useEffect(() => {\n        searchForMonsters(searchTerm);\n    }, [searchForMonsters, searchTerm]);\n\n    return (\n        <>\n            <Tooltip\n                trigger={['focus']}\n                title=\"Add a Monster to Initiative Tracker\"\n            >\n                <AutoComplete\n                    options={searchResults.map(renderItem)}\n                    style={{ width: 400 }}\n                    value={searchTerm}\n                    onSearch={searchTermHandler}\n                    onSelect={selectHandler}\n                    placeholder=\"Adult Gold Dragon\"\n                />\n            </Tooltip>\n        </>\n    )\n};\n\nexport default MonsterSearch;","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport {\n    addEntity,\n    nextInitiative,\n    setEntities,\n    resetInitiative,\n    editEntity,\n    InitiativePlayerCharacter, InitiativeNonPlayerCharacter, removeEntity\n} from '../../store/initiative/initiative.slice';\nimport { Button, Collapse, InputNumber, List, Space, Statistic, Typography } from 'antd';\nimport { PlayerCharacter } from '../../store/players/players.slice';\nimport MonsterCard from '../MonsterCard/MonsterCard';\nimport { useThemeSwitcher } from 'react-css-theme-switcher';\nimport classNames from 'classnames';\nimport styles from './TravelerInitiative.module.css';\nimport MonsterSearch from './MonsterSearch';\nimport { Monster } from '../../types/monster';\nimport Chance from 'chance';\nimport dice from \"dice.js\";\nimport { getAbilityModifier, getRoundTime } from '../../util/utilities';\n\ntype PlayerWithInitiative = PlayerCharacter & InitiativePlayerCharacter;\ntype PopulatedInitiativeEntity = PlayerWithInitiative | InitiativeNonPlayerCharacter;\n\nconst chance = new Chance();\n\nconst TravelerInitiative = () => {\n    const dispatch = useDispatch();\n    const players = useSelector((state: RootState) => state.players);\n    const {currentInitiative, entities, currentRound} = useSelector((state: RootState) => state.initiative);\n\n    const [populatedEntities, setPopulatedEntities] = useState<PopulatedInitiativeEntity[]>([]);\n\n    const addPlayersToInitiative = useCallback(() => {\n        for (const player of players.players) {\n            dispatch(addEntity({\n                id: player.id,\n                initiative: 0,\n                type: 'player'\n            }));\n        }\n    }, [players, dispatch]);\n\n    const nextInitiativeHandler = useCallback(() => {\n        dispatch(nextInitiative());\n    }, [dispatch]);\n\n    const clearInitiativeHandler = useCallback(() => {\n        dispatch(setEntities([]));\n        dispatch(resetInitiative());\n    }, [dispatch])\n\n    const getEntitiesSortedByInitiative = useCallback(() => {\n        return [...populatedEntities].sort((a, b) => b.initiative - a.initiative);\n    }, [populatedEntities]);\n\n    const editInitiativeHandler = useCallback((newInitiative: number, eid: string) => {\n        dispatch(editEntity({\n            id: eid,\n            initiative: newInitiative\n        }));\n    }, [dispatch]);\n\n    const npcHealthChangeHandler = useCallback((hp: number, eid: string) => {\n        const entityToEdit = populatedEntities.find(e => e.id === eid);\n\n        if (!entityToEdit || entityToEdit.type !== 'npc') {\n            return;\n        }\n\n        dispatch(editEntity({\n            id: eid,\n            currentHP: Math.max(Math.min(entityToEdit.currentHP + hp, entityToEdit.hit_points), 0)\n        }))\n    }, [dispatch, populatedEntities]);\n\n    const addMonsterToInitiative = useCallback((monster: Monster) => {\n        dispatch(addEntity({\n            ...monster,\n            initiative: dice.roll('d20') + getAbilityModifier(monster.dexterity),\n            id: chance.guid(),\n            currentHP: monster.hit_points,\n            type: 'npc'\n        }));\n    }, [dispatch]);\n\n    const removeHandler = useCallback((eid: string) => {\n        dispatch(removeEntity(eid));\n    }, [dispatch]);\n\n    useEffect(() => {\n        const list: PopulatedInitiativeEntity[] = [];\n\n        for (const entity of entities) {\n            if (entity.type === 'player') {\n                const fullPlayer = players.players.find(p => p.id === entity.id);\n\n                if (fullPlayer) {\n                    list.push({\n                        ...fullPlayer,\n                        initiative: entity.initiative,\n                        type: 'player'\n                    });\n                } else {\n                    dispatch(removeEntity(entity.id));\n                }\n            } else if (entity.type === 'npc') {\n                list.push(entity);\n            }\n        }\n\n        setPopulatedEntities(list);\n    }, [entities, players, dispatch]);\n\n    return (\n        <>\n            <div style={{display: 'flex'}}>\n                <Space>\n                    <Button onClick={addPlayersToInitiative}>Add All Players</Button>\n                    <Button onClick={nextInitiativeHandler}>Next Initiative</Button>\n                    <Button onClick={clearInitiativeHandler} danger>Clear Initiative</Button>\n                </Space>\n\n                <div style={{flex: 1}} />\n                <MonsterSearch onResult={addMonsterToInitiative} />\n            </div>\n\n            <div style={{textAlign: 'center'}}>\n                <Typography.Title level={3}>Round {currentRound + 1}</Typography.Title>\n                <Typography.Paragraph>\n                    <Typography.Text strong>Time Elapsed </Typography.Text>\n                    {getRoundTime(currentRound).minutes}\n                    <span className={styles.separator}>:</span>\n                    {getRoundTime(currentRound).seconds}\n                </Typography.Paragraph>\n            </div>\n\n            <List\n                itemLayout=\"vertical\"\n                size=\"large\"\n                style={{marginTop: 10}}\n                dataSource={getEntitiesSortedByInitiative()}\n                renderItem={entity => (\n                    <InitiativeEntityItem\n                        entity={entity}\n                        active={currentInitiative === entity.initiative}\n                        onInitiativeEdit={editInitiativeHandler}\n                        onHPChange={npcHealthChangeHandler}\n                        onRemove={removeHandler}\n                    />\n                )}\n            />\n\n            <Typography.Paragraph\n                type=\"secondary\"\n                style={{textAlign: 'center', fontStyle: 'italic', marginBottom: 0}}\n            >\n                Tip: Click the initiative number to change it.\n            </Typography.Paragraph>\n        </>\n    );\n};\n\ninterface InitiativeEntityItemProps {\n    entity: PopulatedInitiativeEntity;\n    active: boolean;\n    onInitiativeEdit: (newInitiative: number, eid: string) => void;\n    onHPChange: (hp: number, eid: string) => void;\n    onRemove: (eid: string) => void;\n}\n\nconst InitiativeEntityItem = (props: InitiativeEntityItemProps) => {\n    const { currentTheme } = useThemeSwitcher();\n    const {entity, active, onInitiativeEdit, onHPChange, onRemove} = props;\n    const [hitMod, setHitMod] = useState(0);\n    const [editingInitiative, setEditingInitiative] = useState(false);\n    const [editInitiativeValue, setEditInitiativeValue] = useState(0);\n\n    const entityDescription = entity.type === 'player' ?\n        `Level ${entity.level} / Armor Class ${entity.armorClass}` :\n        `CR ${entity.challenge_rating} / Armor Class ${entity.armor_class} (${entity.armor_desc})`\n\n    const activeStyle = classNames({\n        [`${styles.initiativeBoxLight}`]: currentTheme === 'light',\n        [`${styles.initiativeBoxDark}`]: currentTheme === 'dark',\n        [`${styles.active}`]: active\n    });\n\n    const healHandler = () => {\n        onHPChange(hitMod, entity.id);\n        setHitMod(0);\n    };\n\n    const damageHandler = () => {\n        onHPChange(hitMod * -1, entity.id);\n        setHitMod(0);\n    };\n\n    const hitModChangeHandler = (value: string | number | undefined) => {\n        if (value !== undefined) {\n            setHitMod(+value);\n        }\n    };\n\n    const editInitiativeValueHandler = (value: number | string | undefined) => {\n        if (value !== undefined) {\n            setEditInitiativeValue(+value);\n        }\n    };\n\n    const editInitiativeHandler = (value: boolean) => {\n        if (value) {\n            setEditInitiativeValue(entity.initiative);\n        }\n\n        setEditingInitiative(value);\n    };\n\n    const initiativeEditKeyHandler = (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (e.key === 'Enter') {\n            onInitiativeEdit(editInitiativeValue, entity.id);\n            editInitiativeHandler(false);\n        }\n    };\n\n    const removeHandler = () => {\n        onRemove(entity.id);\n    }\n\n    const getInitiativeBox = () => {\n        if (editingInitiative) {\n            return <InputNumber value={editInitiativeValue} onChange={editInitiativeValueHandler}\n                                onKeyDown={initiativeEditKeyHandler} autoFocus/>\n        } else {\n            return (\n                <div onClick={() => editInitiativeHandler(true)}>\n                    <Statistic title=\"Initiative\" value={entity.initiative}/>\n                </div>\n            )\n        }\n    };\n\n    return (\n        <>\n            <List.Item\n                key={entity.id}\n                extra={(\n                    <Statistic\n                        title=\"Hit Points\"\n                        value={entity.currentHP}\n                        suffix={`/ ${entity.type === 'player' ? entity.maxHP : entity.hit_points}`}\n                        valueStyle={\n                            {\n                                color: entity.currentHP === (entity.type === 'player' ? entity.maxHP : entity.hit_points) ?\n                                    '#3f8600' :\n                                    entity.currentHP === 0 ? '#cf1322' : 'unset'\n                            }\n                        }\n                    />\n                )}\n                className={activeStyle}\n                style={{marginBottom: 10}}\n            >\n                <List.Item.Meta\n                    title={(\n                        <>\n                            {entity.name}\n                            <Button type=\"link\" danger onClick={removeHandler}>Remove</Button>\n                        </>\n                    )}\n                    description={entityDescription}\n                    avatar={getInitiativeBox()}\n                />\n\n                {entity.type === 'npc' && (\n                    <>\n                        <Space>\n                            <InputNumber min={0} value={hitMod} onChange={hitModChangeHandler} />\n\n                            <Button type=\"primary\" onClick={healHandler}>Heal</Button>\n                            <Button type=\"primary\" danger onClick={damageHandler}>Damage</Button>\n                        </Space>\n\n                        <Collapse style={{marginTop: 10}}>\n                            <Collapse.Panel key={0} header=\"Monster Card\">\n                                <MonsterCard monster={entity.slug} />\n                            </Collapse.Panel>\n                        </Collapse>\n                    </>\n                )}\n            </List.Item>\n        </>\n    );\n}\n\nexport default TravelerInitiative;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface PlayerCharacter {\n    id: string;\n    name: string;\n    maxHP: number;\n    currentHP: number;\n    armorClass: number;\n    level: number;\n    type: 'player';\n}\n\nconst initialPlayerListState: { players: PlayerCharacter[] } = {\n    players: []\n};\n\nconst playerListSlice = createSlice({\n    name: 'player-list',\n    initialState: initialPlayerListState,\n    reducers: {\n        addPlayer(state, action: PayloadAction<PlayerCharacter>) {\n            state.players.push(action.payload);\n        },\n        removePlayer(state, action: PayloadAction<string>) {\n            state.players = state.players.filter(p => p.id !== action.payload);\n        },\n        editPlayer(state, action: PayloadAction<PlayerCharacter>) {\n            const player = state.players.find(p => p.id === action.payload.id);\n\n            if (player) {\n                player.name = action.payload.name;\n                player.maxHP = action.payload.maxHP;\n                player.currentHP = action.payload.currentHP;\n                player.armorClass = action.payload.armorClass;\n                player.level = action.payload.level;\n            }\n        }\n    }\n});\n\nexport const { addPlayer, removePlayer, editPlayer } = playerListSlice.actions;\nexport default playerListSlice.reducer;","import React, { useCallback, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport { PlayerCharacter, editPlayer, addPlayer, removePlayer } from '../../store/players/players.slice';\nimport Chance from 'chance';\nimport { Button, Divider, Form, Input, InputNumber, List, Modal, Space, Statistic } from 'antd';\nimport { useThemeSwitcher } from 'react-css-theme-switcher';\n\nconst chance = new Chance();\n\nconst TravelerPlayers = () => {\n    const dispatch = useDispatch();\n    const { players } = useSelector((state: RootState) => state.players);\n    const [editPlayerForm] = Form.useForm();\n\n    const [editingPlayer, setEditingPlayer] = useState<string | null>(null);\n\n    const layout = {\n        labelCol: { span: 8 },\n        wrapperCol: { span: 16 },\n    };\n\n    const setEditingPlayerHandler = useCallback((pid: string) => {\n        const player = players.find(p => p.id === pid);\n\n        if (!player) {\n            return undefined;\n        }\n\n        editPlayerForm.setFieldsValue({\n            name: player.name,\n            maxHP: player.maxHP,\n            armorClass: player.armorClass,\n            level: player.level\n        });\n\n        setEditingPlayer(pid);\n    }, [players, editPlayerForm]);\n\n    const playerEditHandler = useCallback((player: Pick<PlayerCharacter, 'name' | 'maxHP' | 'armorClass' | 'level'>) => {\n        const playerToEdit = players.find(p => p.id === editingPlayer);\n\n        if (!playerToEdit) {\n            return;\n        }\n\n        dispatch(editPlayer({\n            ...playerToEdit,\n            ...player,\n            currentHP: Math.max(player.maxHP - (playerToEdit.maxHP - playerToEdit.currentHP), 0)\n        }));\n    }, [dispatch, editingPlayer, players]);\n\n    const playerRemoveHandler = useCallback((pid: string) => {\n        dispatch(removePlayer(pid));\n    }, [dispatch])\n\n    const playerHealthChangeHandler = useCallback((hp: number, pid: string) => {\n        const playerToEdit = players.find(p => p.id === pid);\n\n        if (!playerToEdit) {\n            return;\n        }\n\n        dispatch(editPlayer({\n            ...playerToEdit,\n            currentHP: Math.max(Math.min(playerToEdit.currentHP + hp, playerToEdit.maxHP), 0)\n        }));\n    }, [players, dispatch]);\n\n    const addNewPlayer = useCallback(() => {\n        dispatch(addPlayer({\n            id: chance.guid(),\n            name: 'New Player',\n            maxHP: 8,\n            currentHP: 8,\n            armorClass: 10,\n            level: 1,\n            type: 'player'\n        }));\n    }, [dispatch]);\n\n    return (\n        <>\n            <List\n                itemLayout=\"vertical\"\n                size=\"large\"\n                dataSource={players}\n                renderItem={player => (\n                    <PlayerItem\n                        player={player}\n                        onHPChange={playerHealthChangeHandler}\n                        onEdit={setEditingPlayerHandler}\n                        onRemove={playerRemoveHandler}\n                    />\n                )}\n            />\n\n            <Divider>\n                <Button onClick={addNewPlayer}>Add Player</Button>\n            </Divider>\n\n            <Modal\n                title={`Editing ${players.find(p => p.id === editingPlayer)?.name}`}\n                visible={!!editingPlayer}\n                onOk={() => {\n                    editPlayerForm\n                        .validateFields()\n                        .then(values => {\n                            playerEditHandler({\n                                name: values.name,\n                                maxHP: values.maxHP,\n                                armorClass: values.armorClass,\n                                level: values.level\n                            });\n\n                            setEditingPlayer(null);\n                            editPlayerForm.resetFields();\n                        })\n                        .catch(console.error);\n                }}\n                onCancel={() => setEditingPlayer(null)}\n            >\n                <Form\n                    {...layout}\n                    form={editPlayerForm}\n                    name=\"edit-player\"\n                >\n                    <Form.Item\n                        name=\"name\"\n                        label=\"Name\"\n                        rules={[{ required: true, message: 'Name is required!' }]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"maxHP\"\n                        label=\"Max HP\"\n                        rules={[{ required: true, message: 'Max HP is required!' }]}\n                    >\n                        <InputNumber min={1} />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"armorClass\"\n                        label=\"Armor Class\"\n                        rules={[{ required: true, message: 'Armor Class is required!' }]}\n                    >\n                        <InputNumber min={1} />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"level\"\n                        label=\"Level\"\n                        rules={[{ required: true, message: 'Level is required!' }]}\n                    >\n                        <InputNumber min={1} />\n                    </Form.Item>\n                </Form>\n            </Modal>\n        </>\n    )\n};\n\ninterface PlayerItemProps {\n    player: PlayerCharacter;\n    onHPChange: (hp: number, pid: string) => void;\n    onEdit: (pid: string) => void;\n    onRemove: (pid: string) => void;\n}\n\nconst PlayerItem = ({ player, onHPChange, onEdit, onRemove }: PlayerItemProps) => {\n    const [hitMod, setHitMod] = useState(0);\n    const { currentTheme } = useThemeSwitcher();\n\n    const healHandler = useCallback(() => {\n        onHPChange(hitMod, player.id);\n        setHitMod(0);\n    }, [hitMod, onHPChange, player]);\n\n    const damageHandler = useCallback(() => {\n        onHPChange(hitMod * -1, player.id);\n        setHitMod(0);\n    }, [hitMod, onHPChange, player]);\n\n    const hitModChangeHandler = useCallback((value: string | number | undefined) => {\n        if (value) {\n            setHitMod(+value);\n        }\n    }, []);\n\n    const onEditHandler = useCallback(() => {\n        onEdit(player.id);\n    }, [onEdit, player]);\n\n    const onRemoveHandler = useCallback(() => {\n        onRemove(player.id);\n    }, [onRemove, player]);\n\n    return (\n        <>\n            <List.Item\n                key={player.id}\n                extra={(\n                    <Statistic\n                        title=\"Hit Points\"\n                        value={player.currentHP}\n                        suffix={`/ ${player.maxHP}`}\n                        valueStyle={{color: player.currentHP === player.maxHP ? '#3f8600' : player.currentHP === 0 ? '#cf1322' : 'unset'}}\n                    />\n                    )}\n                style={{border: '2px solid', borderColor: currentTheme === 'light' ? '#d9d9d9' : '#505050', marginBottom: 10}}\n            >\n                <List.Item.Meta\n                    title={(\n                        <>\n                            {player.name}\n                            <Button type=\"link\" onClick={onEditHandler}>Edit</Button>\n                            <Button type=\"link\" danger onClick={onRemoveHandler}>Remove</Button>\n                        </>\n                    )}\n                    description={`Level ${player.level} / Armor Class ${player.armorClass}`}\n                />\n\n                <Space>\n                    <InputNumber min={0} value={hitMod} onChange={hitModChangeHandler} />\n\n                    <Button type=\"primary\" onClick={healHandler}>Heal</Button>\n                    <Button type=\"primary\" danger onClick={damageHandler}>Damage</Button>\n                </Space>\n            </List.Item>\n        </>\n    )\n};\n\nexport default TravelerPlayers;","import { createSlice } from '@reduxjs/toolkit';\n\nexport interface JoJoState {\n    active: boolean;\n}\n\nconst initialState: JoJoState = {\n    active: false\n};\n\nconst jojoSlice = createSlice({\n    name: 'jojo',\n    initialState,\n    reducers: {\n        activate(state) {\n            state.active = true;\n        },\n        deactivate(state) {\n            state.active = false;\n        }\n    }\n});\n\nexport const { activate, deactivate } = jojoSlice.actions;\nexport default jojoSlice.reducer;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Typography } from 'antd';\n\nconst TravelerNotes = () => {\n    const [notes, setNotes] = useState<string>('Type your notes here...');\n\n    const noteChangeHandler = useCallback((note: string) => {\n        setNotes(note);\n        localStorage.setItem('traveler-notes', note);\n    }, []);\n\n    useEffect(() => {\n        const localNotes = localStorage.getItem('traveler-notes');\n\n        if (localNotes) {\n            setNotes(localNotes);\n        }\n    }, []);\n\n    return (\n        <div>\n            <Typography.Paragraph\n                editable={{\n                    onChange: noteChangeHandler\n                }}\n            >{notes}</Typography.Paragraph>\n        </div>\n    )\n};\n\nexport default TravelerNotes;","import React, { useCallback, useEffect, useState } from 'react';\nimport './App.css';\nimport { Button, Card, Col, Layout, Row } from 'antd';\nimport TravelerTime from './components/TravelerTime/TravelerTime';\nimport TravelerEncounters from './components/TravelerEncounters/TravelerEncounters';\nimport TravelerWeather from './components/TravelerWeather/TravelerWeather';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from './store';\nimport { useThemeSwitcher } from 'react-css-theme-switcher';\nimport { setHour, setSeason, setDay } from './store/time/time.slice';\nimport TravelerInitiative from './components/TravelerInitiative/TravelerInitiative';\nimport TravelerPlayers from './components/TravelerPlayers/TravelerPlayers';\nimport { activate, deactivate } from './store/jojo/jojo.slice';\nimport TravelerNotes from './components/TravelerNotes/TravelerNotes';\n\nimport dayGif from './assets/images/day-time.gif';\nimport sunsetGif from './assets/images/sunset-time.gif';\nimport nightGif from './assets/images/night-time.gif';\n\nconst {Header, Content, Footer} = Layout;\n\nfunction App() {\n    const time = useSelector((state: RootState) => state.time);\n    const dispatch = useDispatch();\n    const jojo = useSelector((state: RootState) => state.jojo);\n    // const { switcher, status, themes } = useThemeSwitcher();\n    const { status } = useThemeSwitcher();\n    const [clicks, setClicks] = useState(0);\n\n    const resetState = useCallback(() => {\n        dispatch(setHour(7));\n        dispatch(setDay(1));\n        dispatch(setSeason('spring'));\n    }, [dispatch]);\n\n    const clickHandler = () => {\n        setClicks(prevState => prevState + 1);\n    };\n\n    const getGifForTime = () => {\n        if (time.hour >= 8 && time.hour < 18) {\n            return dayGif;\n        }\n\n        if (time.hour >= 18 && time.hour < 20) {\n            return sunsetGif;\n        }\n\n        if (time.hour <= 8 && time.hour > 5) {\n            return sunsetGif;\n        }\n\n        return nightGif;\n    };\n\n    useEffect(() => {\n        if (clicks >= 5) {\n            if (jojo.active) {\n                dispatch(deactivate());\n            } else {\n                dispatch(activate());\n\n                const openingAudio = new Audio('/media/jojo-opening.mp4');\n                openingAudio.play();\n            }\n\n            setClicks(0);\n        }\n    }, [clicks, dispatch, jojo]);\n\n    // useEffect(() => {\n    //     switcher({\n    //         theme: time.hour < 6 || time.hour > 20 ? themes.dark : themes.light\n    //     })\n    // }, [time, switcher, themes]);\n\n    if (status === \"loading\") {\n        return null;\n    }\n\n    return (\n        <Layout className=\"layout\">\n            <Header className=\"header\">\n                <div className=\"logo\" onClick={clickHandler}>{jojo.active ? 'JOJO\\'S BIZARRE D&D APP' : 'Traveler'}</div>\n                <div style={{flex: 1}} />\n                <Button type=\"primary\" danger onClick={resetState}>Reset Time</Button>\n            </Header>\n            <Content style={{padding: '50px'}}>\n                <Row gutter={16}>\n                    <Col span={10} offset={7}>\n                        <Card className=\"time-card\" style={{backgroundImage: `url(${getGifForTime()})`}}>\n                            <TravelerTime />\n                        </Card>\n                    </Col>\n                </Row>\n\n                <Row gutter={16} style={{marginTop: 16}}>\n                    <Col span={8}>\n                        <Card title=\"Weather\">\n                            <TravelerWeather />\n                        </Card>\n\n                        <Card title=\"Player Characters\" style={{marginTop: 16}}>\n                            <TravelerPlayers />\n                        </Card>\n\n                        <Card title=\"Notes\" style={{marginTop: 16}}>\n                            <TravelerNotes />\n                        </Card>\n                    </Col>\n                    <Col span={16}>\n                        <Card title=\"Encounters\">\n                            <TravelerEncounters />\n                        </Card>\n\n                        <Card title=\"Initiative Tracker\" style={{marginTop: 16}}>\n                            <TravelerInitiative />\n                        </Card>\n                    </Col>\n                </Row>\n            </Content>\n            <Footer style={{textAlign: 'center'}}>Traveler by Jackson Yeager</Footer>\n        </Layout>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux';\n\nimport timeReducer from './time/time.slice';\nimport weatherReducer from './weather/weather.slice';\nimport playersReducer from './players/players.slice';\nimport initiativeReducer from './initiative/initiative.slice';\nimport jojoReducer from './jojo/jojo.slice';\n\nconst rootReducer = combineReducers({\n    time: timeReducer,\n    weather: weatherReducer,\n    players: playersReducer,\n    initiative: initiativeReducer,\n    jojo: jojoReducer\n});\n\nexport default rootReducer;\nexport type RootState = ReturnType<typeof rootReducer>;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux';\n\nimport rootReducer from './store';\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport initSubscriber from 'redux-subscriber';\n\nimport { ThemeSwitcherProvider } from 'react-css-theme-switcher';\n\nconst storageState = localStorage.getItem('traveler-state');\nconst persistedState = storageState ? JSON.parse(storageState) : {};\n\nconst store = configureStore({\n    reducer: rootReducer,\n    preloadedState: persistedState\n});\n\ninitSubscriber(store);\n\nstore.subscribe(() => {\n    localStorage.setItem('traveler-state', JSON.stringify(store.getState()));\n});\n\nconst themes = {\n    dark: `${process.env.PUBLIC_URL}/dark-theme.css`,\n    light: `${process.env.PUBLIC_URL}/light-theme.css`,\n};\n\nReactDOM.render(\n    <Provider store={store}>\n        <ThemeSwitcherProvider themeMap={themes} defaultTheme=\"light\" insertionPoint=\"styles-insertion-point\">\n            <App />\n        </ThemeSwitcherProvider>\n    </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"MonsterCard_image__2wGeK\",\"monsterCard\":\"MonsterCard_monsterCard__12n4v\"};"],"sourceRoot":""}